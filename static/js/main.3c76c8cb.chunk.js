(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,a){e.exports=a(376)},170:function(e,t,a){},176:function(e,t,a){var n={"./legal-doc/cookie-policy.md":177,"./legal-doc/faq.md":178,"./legal-doc/privacy-policy.md":179,"./legal-doc/terms-of-service.md":180};function i(e){var t=o(e);return a(t)}function o(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=176},177:function(e,t,a){e.exports=a.p+"static/media/cookie-policy.0edd26a9.md"},178:function(e,t,a){e.exports=a.p+"static/media/faq.e57a5d90.md"},179:function(e,t,a){e.exports=a.p+"static/media/privacy-policy.399e055e.md"},180:function(e,t,a){e.exports=a.p+"static/media/terms-of-service.b7930632.md"},331:function(e,t){},376:function(e,t,a){"use strict";a.r(t);var n=a(7),i=a(0),o=a.n(i),r=a(25),l=a.n(r),s=(a(170),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function c(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var m=a(22),u=a(63),d=a(37),g={playbackDisplayMode:"extend",frameRate:10,frameRatio:1.3,width:null,height:null,alertingOnMotion:!0,alertingOnMotionStrategy:"alert-once",savingToFiles:!1,savingRawVideoFiles:!1,savingToFilesPrefix:"videosurveillance.webcamp-vclip",savingToFilesOnlyMotionDetected:!0,savingToFilesStrategy:"time",splitFileSize:"10",splitFileTime:"on-the-1-min"},p={consent:null,settingsSliderIsOn:!1},f={streamReady:!1,motioning:!1,saving:!1,encoding:!1},h=a(163),v={progressList:[]},b={misc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPLY_WEB_STORAGE_VALUE":return Object(n.a)({},e,Object(d.a)({},t.name,t.value));case"USER_CLICK_CONSENT":return Object(n.a)({},e,{consent:!0});case"SETTINGS_SLIDER_ON":return Object(n.a)({},e,{settingsSliderIsOn:!0});case"SETTINGS_SLIDER_OFF":return Object(n.a)({},e,{settingsSliderIsOn:!1});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPLY_VIDEO_PARAMS_AS_SETTINGS":return Object(n.a)({},e,t.obj);case"RECOVER_SETTINGS_FROM_WEB_STORAGE":return Object(n.a)({},e,t.value);case"ALTER_SETTING":return"savingToFilesStrategy"===t.name&&"motion-detected"===t.value?Object(n.a)({},e,Object(d.a)({savingToFilesOnlyMotionDetected:!0},t.name,t.value)):"savingToFilesOnlyMotionDetected"===t.name&&"motion-detected"===e.savingToFilesStrategy?Object(n.a)({},e,{savingToFilesOnlyMotionDetected:!0}):Object(n.a)({},e,Object(d.a)({},t.name,t.value));default:return e}},streaming:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;switch((arguments.length>1?arguments[1]:void 0).type){case"STREAM_READY":return Object(n.a)({},e,{streamReady:!0});case"MOTION_DETECTED":return Object(n.a)({},e,{motioning:!0});case"MOTION_GONE":return Object(n.a)({},e,{motioning:!1});case"SAVING_FILES":return Object(n.a)({},e,{saving:!0});case"SAVING_COMPLETE":return Object(n.a)({},e,{saving:!1});case"FFMPEG_STARTED_PROCESSING_FILE":return Object(n.a)({},e,{encoding:!0});case"FFMPEG_FINISHED_PROCESSING_FILE":return Object(n.a)({},e,{encoding:!1});default:return e}},ffmpeg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_FFMPEG_WORK":return Object(n.a)({},e,{progressList:Object(h.a)(e.progressList).concat([{id:t.id,percentage:0}])});case"FFMPEG_WORK_FINISHED":return Object(n.a)({},e,{progressList:e.progressList.filter(function(e){return t.id!==e.id})});case"FFMPEG_WORK_UPDATE_PROGRESS":return Object(n.a)({},e,{progressList:e.progressList.map(function(e){return e.id!==t.id?e:Object(n.a)({},e,{percentage:t.percentage})})});default:return e}}},y=a(378),E=a(379),S=a(9),O=a(10),k=a(18),w=a(17),T=a(19),F=a(21),N=a(28),j=a.n(N),C=a(148),M=a.n(C),x=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).state={markdown:""},a}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=a(176)("./legal-doc".concat(this.props.location.pathname,".md"));fetch(t).then(function(e){return e.text()}).then(function(t){e.setState({markdown:M()(t)})})}},{key:"render",value:function(){var e=this.props.classes,t=this.state.markdown;return o.a.createElement("div",{className:e.root},o.a.createElement(j.a,{className:e.paper},o.a.createElement("section",null,o.a.createElement("article",{dangerouslySetInnerHTML:{__html:t}}))))}}]),t}(i.Component),_=Object(F.withStyles)(function(e){return{root:{backgroundColor:"#f3f9fe"},paper:{padding:3*e.spacing.unit,marginLeft:"auto",marginRight:"auto",width:"65vw",maxWidth:"650px"}}})(x),D=a(79),R=a.n(D),I=a(81),L=a.n(I),P=a(20),A=a.n(P),W=a(80),B=a.n(W),V=a(42),H=a.n(V),G=a(27),U=a.n(G),z=a(32),Y=a.n(z),q=a(33),J=a.n(q),K=a(149),X=a.n(K),Q=a(150),Z=a.n(Q),$=a(151),ee=a.n($),te=function(e){function t(){return Object(S.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.sorry;return o.a.createElement("div",{className:t.root},o.a.createElement(j.a,{className:t.paper},a&&o.a.createElement("section",{className:t.section},o.a.createElement(U.a,{variant:"h6"},"Sorry ... Your browser is not suspported ...")),o.a.createElement("section",{className:t.section},o.a.createElement("div",{className:t.desktopOrMobile},o.a.createElement(X.a,null),o.a.createElement("span",{style:{marginLeft:8}},"Desktop")),o.a.createElement(R.a,{className:t.table},o.a.createElement(B.a,null,o.a.createElement(H.a,null,o.a.createElement(A.a,{className:t.cell}),o.a.createElement(A.a,{className:t.cell},"Playback"),o.a.createElement(A.a,{className:t.cell},"Motion detect"),o.a.createElement(A.a,{className:t.cell},"Saving to files"))),o.a.createElement(L.a,null,[{browserName:"chrome",playback:!0,motionDetect:!0,saveToFiles:!0},{browserName:"opera",playback:!0,motionDetect:!0,saveToFiles:!0},{browserName:"firefox",playback:!0,motionDetect:!0,saveToFiles:!0},{browserName:"edge",playback:!0,motionDetect:!0,saveToFiles:!1},{browserName:"safari",playback:!0,motionDetect:!0,saveToFiles:!1},{browserName:"ie",playback:!1,motionDetect:!1,saveToFiles:!1}].map(function(e){return o.a.createElement(H.a,{key:e.browserName},o.a.createElement(A.a,{component:"th",scope:"row",className:t.cell},o.a.createElement("img",{className:t.img,width:"40px",src:"/browser-logo-".concat(e.browserName,".png"),alt:e.browserName})),o.a.createElement(A.a,{className:t.cell},e.playback?o.a.createElement(Y.a,null):o.a.createElement(J.a,null)),o.a.createElement(A.a,{className:t.cell},e.motionDetect?o.a.createElement(Y.a,null):o.a.createElement(J.a,null)),o.a.createElement(A.a,{className:t.cell},e.saveToFiles?o.a.createElement(Y.a,null):o.a.createElement(J.a,null)))})))),o.a.createElement("section",{className:t.section},o.a.createElement("div",{className:t.desktopOrMobile},o.a.createElement(Z.a,null),o.a.createElement("span",{style:{marginLeft:8}},"Android *")),o.a.createElement(R.a,{className:t.table},o.a.createElement(B.a,null,o.a.createElement(H.a,null,o.a.createElement(A.a,{className:t.cell}),o.a.createElement(A.a,{className:t.cell},"Playback"),o.a.createElement(A.a,{className:t.cell},"Motion detect"),o.a.createElement(A.a,{className:t.cell},"Saving to files"))),o.a.createElement(L.a,null,[{browserName:"chrome",playback:!0,motionDetect:!0,saveToFiles:!0},{browserName:"opera",playback:!0,motionDetect:!0,saveToFiles:!0},{browserName:"firefox",playback:!0,motionDetect:!0,saveToFiles:!0}].map(function(e){return o.a.createElement(H.a,{key:e.browserName},o.a.createElement(A.a,{component:"th",scope:"row",className:t.cell},o.a.createElement("img",{className:t.img,width:"40px",src:"/browser-logo-".concat(e.browserName,".png"),alt:e.browserName})),o.a.createElement(A.a,{className:t.cell},e.playback?o.a.createElement(Y.a,null):o.a.createElement(J.a,null)),o.a.createElement(A.a,{className:t.cell},e.motionDetect?o.a.createElement(Y.a,null):o.a.createElement(J.a,null)),o.a.createElement(A.a,{className:t.cell},e.saveToFiles?o.a.createElement(Y.a,null):o.a.createElement(J.a,null)))})))),o.a.createElement("section",{className:t.section},o.a.createElement("div",{className:t.desktopOrMobile},o.a.createElement(ee.a,null),o.a.createElement("span",{style:{marginLeft:8}},"iOS*")),o.a.createElement(R.a,{className:t.table},o.a.createElement(B.a,null,o.a.createElement(H.a,null,o.a.createElement(A.a,{className:t.cell}),o.a.createElement(A.a,{className:t.cell},"Playback"),o.a.createElement(A.a,{className:t.cell},"Motion detect"),o.a.createElement(A.a,{className:t.cell},"Saving to files"))),o.a.createElement(L.a,null,[{browserName:"safari",playback:!0,motionDetect:!0,saveToFiles:!1},{browserName:"chrome",playback:!1,motionDetect:!1,saveToFiles:!1},{browserName:"opera",playback:!1,motionDetect:!1,saveToFiles:!1},{browserName:"firefox",playback:!1,motionDetect:!1,saveToFiles:!1}].map(function(e){return o.a.createElement(H.a,{key:e.browserName},o.a.createElement(A.a,{component:"th",scope:"row",className:t.cell},o.a.createElement("img",{className:t.img,width:"40px",src:"/browser-logo-".concat(e.browserName,".png"),alt:e.browserName})),o.a.createElement(A.a,{className:t.cell},e.playback?o.a.createElement(Y.a,null):o.a.createElement(J.a,null)),o.a.createElement(A.a,{className:t.cell},e.motionDetect?o.a.createElement(Y.a,null):o.a.createElement(J.a,null)),o.a.createElement(A.a,{className:t.cell},e.saveToFiles?o.a.createElement(Y.a,null):o.a.createElement(J.a,null)))})))),o.a.createElement("section",{className:t.section},o.a.createElement(U.a,{variant:"body1"},"* This Web Application is compute-intensive, hence it's not recommended to run on small mobile devices.")),o.a.createElement("div",{style:{textAlign:"center"}}," ",o.a.createElement("a",{href:"/faq",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"}},"FAQ"))))}}]),t}(i.Component);te.defaultProps={sorry:!1};var ae=Object(F.withStyles)(function(e){return{root:{backgroundColor:"#f3f9fe",width:"100vw",paddingTop:3*e.spacing.unit,paddingBottom:3*e.spacing.unit,display:"flex",justifyContent:"center",alignItems:"center"},desktopOrMobile:{display:"flex",alignItems:"center"},paper:{padding:3*e.spacing.unit,marginLeft:"auto",marginRight:"auto",width:"80vw",maxWidth:"650px",overflowX:"auto"},section:{marginBottom:8*e.spacing.unit},cell:{textAlign:"center",paddingRight:.1*e.spacing.unit}}})(te),ne=a(62),ie=a.n(ne),oe=a(52),re=a.n(oe),le=a(26),se=a.n(le),ce=a(152),me=a.n(ce),ue=a(155),de=a.n(ue),ge=a(154),pe=a.n(ge),fe=a(64),he=a.n(fe),ve=a(153),be=a.n(ve),ye=a(156),Ee=a.n(ye),Se=a(53),Oe=a.n(Se),ke={type:"USER_CLICK_CONSENT"},we={type:"STREAM_READY"},Te={type:"MOTION_DETECTED"},Fe={type:"MOTION_GONE"},Ne={type:"SAVING_FILES"},je={type:"SAVING_COMPLETE"},Ce={type:"SETTINGS_SLIDER_ON"},Me={type:"SETTINGS_SLIDER_OFF"},xe=function(e){return{dialogParagraph2:{marginTop:1*e.spacing.unit},dialogParagraph22:{marginTop:1*e.spacing.unit,marginBottom:1*e.spacing.unit},a:{color:"inherit"}}},_e=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).handleCheck=function(e){return function(t){a.setState(Object(d.a)({},e,t.target.checked))}},a.handleProceed=function(){(0,a.props.userClickConsent)(),localStorage.setItem("consent",!0)},a.state={complyLegalActivitiesChecked:!1,consentToLegalDocsCheck:!1},a}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.fullScreen,n=e.consent,i=this.state,r=i.complyLegalActivitiesChecked,l=i.consentToLegalDocsCheck;return o.a.createElement("div",null,o.a.createElement(me.a,{fullScreen:a,open:!1===n,onClose:null,"aria-labelledby":"videoSurveillance-webcam"},o.a.createElement(be.a,{id:"videoSurveillance-webcam"},"Video Surveillance with Webcam"),o.a.createElement(pe.a,null,o.a.createElement(he.a,{variant:"body1",className:t.dialogParagraph1},"This Web application captures video from Webcam, presents on web page with motion detect alert, and can save video clips to your device."),o.a.createElement(he.a,{variant:"body1",className:t.dialogParagraph2},"Video surveillance activities may or may not legal, depending on various scenarios and the country/region you live. Please seek legal advice and make sure your activities comply with all applicable laws and regulations. This Web application will not be held accountable for any illegal activities. Please respect the privacy of others!"),o.a.createElement(se.a,{control:o.a.createElement(re.a,{id:"checkbox-comply-legal-activities",checked:r,onChange:this.handleCheck("complyLegalActivitiesChecked"),color:"primary"}),label:"I understand and agree."}),o.a.createElement(Oe.a,null),o.a.createElement("br",null),o.a.createElement(he.a,{variant:"body1",className:t.dialogParagraph1},"This Web application is designed to run locally and will not upload captured videos/audios to the Internet. However it uses Google Analytics (to measure traffic and usage), which transfers data over Internet."),o.a.createElement(he.a,{variant:"body1",className:t.dialogParagraph22},"This Web application also store cookies and Web storage on your device. Please read our ",o.a.createElement("a",{href:"/terms-of-service",target:"_blank",rel:"noopener noreferrer",className:t.a},"Terms of Service"),",",o.a.createElement("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:t.a},"Privacy Policy")," and ",o.a.createElement("a",{href:"/cookie-policy",target:"_blank",className:t.a},"Cookies Policy")," for detailed explanation."),o.a.createElement(se.a,{control:o.a.createElement(re.a,{id:"checkbox-consent-to-legal-docs",checked:l,onChange:this.handleCheck("consentToLegalDocsCheck"),color:"primary"}),label:o.a.createElement("span",null,"I consent cookies placement, have read and accept ",o.a.createElement("a",{href:"/terms-of-service",target:"_blank",rel:"noopener noreferrer",className:t.a},"Terms of Service"),", ",o.a.createElement("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:t.a},"Privacy Policy")," and ",o.a.createElement("a",{href:"/cookie-policy",target:"_blank",className:t.a},"Cookies Policy"),".")})),o.a.createElement(de.a,null,o.a.createElement(ie.a,{id:"proceed-button",variant:"outlined",onClick:this.handleProceed,color:"primary",disabled:!(r&&l),autoFocus:!0},"Proceed"))))}}]),t}(i.Component),De=(Object(F.withStyles)(xe)(_e),Object(F.withStyles)(xe)(Object(m.b)(function(e){return{consent:e.misc.consent}},function(e){return{userClickConsent:function(){e(ke)}}})(Ee()()(_e)))),Re=a(103),Ie=a(77),Le=a.n(Ie),Pe=a(157),Ae=a.n(Pe),We=a(61),Be=a.n(We),Ve=a(158),He=a.n(Ve),Ge=function(e){function t(){var e,a;Object(S.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(k.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(i)))).state={open:!1},a.handleClose=function(e,t){"clickaway"!==t&&(a.setState({open:!1}),a.props.off())},a}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.setState({open:this.props.on})}},{key:"componentDidUpdate",value:function(e){this.props.on!==e.on&&this.setState({open:this.props.on})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.duration,n=e.message;return o.a.createElement("div",null,o.a.createElement(Ae.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:a,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:n,action:[o.a.createElement(ie.a,{key:"undo",color:"secondary",size:"small",onClick:this.handleClose},"GOT IT"),o.a.createElement(Be.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:this.handleClose},o.a.createElement(He.a,null))]}))}}]),t}(i.Component),Ue=Object(F.withStyles)(function(e){return{close:{padding:e.spacing.unit/2}}})(Ge),ze=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},Ye=function(e){return o.a.createElement(Ue,Object.assign({duration:2e4,message:o.a.createElement("span",{id:"message-id"},"We have problems accessing the Webcam, please check if another program is using it. ",ze()?"Or you need to give this Browser Camera acess in System Settings.":"Or if you denied permission request, you can click the icon to the left of the web address to regrant.")},e))},qe=function(e){return o.a.createElement(Ue,Object.assign({duration:1e4,message:o.a.createElement("span",{id:"message-id"},"Web App is loading, please wait.")},e))},Je=a(76),Ke=a.n(Je),Xe=a(164),Qe=function(e){function t(){return Object(S.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.flagName;this.bannerFlag=JSON.parse(localStorage.getItem("banner")),this.bannerDisplayedBefore=this.bannerFlag&&this.bannerFlag[e]}},{key:"off",value:function(){var e=this.props.flagName,t=this.bannerFlag||{};t[e]=!0,localStorage.setItem("banner",JSON.stringify(t)),this.bannerDisplayedBefore=!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.on,n=t.off,i=(t.flagName,Object(Xe.a)(t,["on","off","flagName"]));return o.a.createElement(Ue,Object.assign({on:!this.bannerDisplayedBefore&&a,off:function(){e.off(),n()}},i))}}]),t}(i.Component),Ze=function(e){return o.a.createElement(Qe,Object.assign({flagName:"useVlc",duration:2e4,message:o.a.createElement("span",{id:"message-id"},"If you have trouble opening downloaded files, try ",o.a.createElement("img",{width:"15px",src:"/logo-vlc.png",alt:"VLC"})," ",o.a.createElement("a",{href:"https://www.videolan.org",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"}},"VLC")," or Chrome browser, see ",o.a.createElement("a",{href:"/faq",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"}},"FAQ")," for details.")},e))},$e=a(50),et=0,tt=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e,t){},s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(e){},c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Object(S.a)(this,e),this.libLoadingTS=Date.now(),this.libLoadedTS=1/0,this.id=et++,this.logging=c,console.log("ffmpeg-work-id:",this.id),console.log("ffmpeg-work-duration:",o);var m=new Worker("/ffmpeg-worker-mp4.js");m.onmessage=function(e){var c=e.data;switch(c.type){case"ready":if(t.libLoadedTS=Date.now(),a(t.libLoadedTS-t.libLoadingTS),null==n){m.postMessage({type:"run",arguments:["-version"]});break}var u=new FileReader;u.onload=function(){m.postMessage({type:"run",MEMFS:[{name:"in.mp4",data:new Uint8Array(u.result)}],arguments:["-i","in.mp4","-preset","veryfast","out.mp4"]}),r(t.id)},u.readAsArrayBuffer(n);break;case"stdout":console.log("ffmpeg-worker stdout:",c.data);break;case"stderr":console.log("ffmpeg-worker stderr:",c.data);var d=c.data.match(/time=(\d\d:\d\d:\d\d.\d\d)/);null!=d&&d.length>1&&l(t.id,$e.duration(d[1]).as("milliseconds")/o);break;case"done":console.log("ffmpeg-worker done:",c.data),c.data.MEMFS.length>0&&Ke()(new Blob([c.data.MEMFS[0].data]),i),s(t.id),m.terminate();break;case"exit":console.log("ffmpeg-worker Process exited with code "+c.data),m.terminate();break;default:console.log("ffmpeg-worker onmessage case:",c.type)}}}return Object(O.a)(e,[{key:"log",value:function(){var e;this.logging&&(e=console).log.apply(e,arguments)}},{key:"loadingTime",get:function(){return this.libLoadedTS-this.libLoadingTS}}]),e}(),at=a(50),nt=a(317),it=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).canvasRef=o.a.createRef(),a.splitFileBasedOnTimeScheduleJob=null,a.savingToFileStatus="closed",a.savingToFileStartingTS=0,a.savingToFileFinishedTS=0,a.savingToFileName="",a.savingToFileMediaRecorder=null,a.savingToFileChunks=null,a.savingToFileFileStreamWriter=null,a.fileSaverChunks=[],a.ffmpegLoadTime=1/0,a.state={putOnUseVlcSnack:!1,abort:!1},a}return Object(T.a)(t,e),Object(O.a)(t,[{key:"ffmpegLoadingTime",value:function(){return this.ffmpegLoadedTS-this.ffmpegLoadingTS}},{key:"closeCurrentFile",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("! Closing up the savingToFile"),"started"===this.savingToFileStatus&&(this.savingToFileStatus="closing",this.savingToFileMediaRecorder.stop(),setTimeout(function(){var a=e.savingToFileName,n=e.fileSaverChunks.slice(0),i=e.savingToFileFinishedTS-e.savingToFileStartingTS;e.props.savingRawVideoFiles?(console.log("ffmpeg-worker is not ready, or rawing, dump directly"),Ke()(new Blob(n,{type:"video/mp4"}),a),e.setState({putOnUseVlcSnack:!0}),new tt(function(t){e.ffmpegLoadTime=t,console.log("FFmpeg library loaded time: ",t)})):(console.log("ffmpeg-worker is ready and not rawing, use it"),new tt(function(t){e.ffmpegLoadTime=t,console.log("FFmpeg library loaded time: ",t)},new Blob(n),a,i,function(t){return e.props.newFFmpegWorkStarted(t)},function(t,a){return e.props.ffmpegWorkUpdateProgress(t,a)},function(t){return e.props.ffmpegWorkFinished(t)})),e.fileSaverChunks=[],e.savingToFileMediaRecorder=null,e.props.savingComplete(),e.savingToFileStatus="closed",t&&e.kickOffSavingToFile()},1e3))}},{key:"pauseSavingToFile",value:function(){"started"===this.savingToFileStatus&&this.savingToFileMediaRecorder.pause()}},{key:"resumeOrKickoffSavingToFile",value:function(){var e=this;"starting"!==this.savingToFileStatus&&"started"!==this.savingToFileStatus||null==this.savingToFileMediaRecorder?"closing"===this.savingToFileStatus?setTimeout(function(){return e.kickOffSavingToFile()},1e3):"closed"===this.savingToFileStatus&&this.kickOffSavingToFile():this.savingToFileMediaRecorder.resume()}},{key:"kickOffSavingToFile",value:function(){var e=this,t=this.props,a=t.savingToFiles,n=t.frameRate,i=t.savingToFilesPrefix,o=t.savingToFilesOnlyMotionDetected,r=t.motioning;if(a&&"starting"!==this.savingToFileStatus&&"started"!==this.savingToFileStatus&&(!o||r)&&null!=this.props.canvasRef.current){this.savingToFileStatus="starting",console.log("! Kicking off a savingToFile");var l=this.props.canvasRef.current.captureStream(n);this.savingToFileMediaRecorder=new MediaRecorder(l),this.savingToFileName="".concat(i,"_").concat(Date.now(),"_").concat(at().format("YYYY-MM-DD_HH-mm-ss"),".mp4"),this.savingToFileMediaRecorder.start(),this.props.savingFiles(),this.savingToFileMediaRecorder.onstart=function(){e.savingToFileStatus="started",e.savingToFileStartingTS=Date.now(),console.log("MediaRecorder - onstart")},this.savingToFileMediaRecorder.onstop=function(){e.savingToFileFinishedTS=Date.now(),console.log("MediaRecorder - onstop")},this.savingToFileMediaRecorder.onpause=function(){console.log("MediaRecorder - onpause")},this.savingToFileMediaRecorder.onresume=function(){console.log("MediaRecorder - onresume")},this.savingToFileMediaRecorder.ondataavailable=function(t){var a=t.data;console.log("MediaRecorder - ondataavailable"),e.fileSaverChunks.push(a)}}}},{key:"rescheduleSplitFileBasedOnTime",value:function(){var e=this;if("started"===this.savingToFileStatus||"time"===this.props.savingToFilesStrategy){var t="* * * * *";switch(this.props.splitFileTime){case"on-the-1-min":t="* * * * *";break;case"on-the-2-min":t="*/2 * * * *";break;case"on-the-5-min":t="*/5 * * * *";break;case"on-the-10-min":t="*/10 * * * *";break;case"on-the-30-min":t="*/30 * * * *";break;case"on-the-hour":t="0 * * * *";break;default:t="* * * * *"}null==this.splitFileBasedOnTimeScheduleJob?(console.log("Schedule a split based on time:",t),this.splitFileBasedOnTimeScheduleJob=nt.scheduleJob(t,function(){return e.closeCurrentFile(!0)})):(console.log("Rechedule a split based on time:",t),this.splitFileBasedOnTimeScheduleJob.reschedule(t))}}},{key:"cancelSplitFileBasedOnTimeSchedule",value:function(){null!=this.splitFileBasedOnTimeScheduleJob&&(console.log("Cancel a split based on time"),this.splitFileBasedOnTimeScheduleJob.cancel(),this.splitFileBasedOnTimeScheduleJob=null)}},{key:"initiateFFmpegWorkerAfterOpenCVLoaded",value:function(){var e=this;"undefined"===typeof window.cv?setTimeout(function(){console.log("OpenCV not loaded yet, defer ffmepg-worker loading"),e.initiateFFmpegWorkerAfterOpenCVLoaded()},4e3):new tt(function(t){e.ffmpegLoadTime=t,console.log("FFmpeg library loaded time: ",t)})}},{key:"componentDidMount",value:function(){this.initiateFFmpegWorkerAfterOpenCVLoaded(),this.rescheduleSplitFileBasedOnTime()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.savingToFiles,n=t.savingToFilesOnlyMotionDetected,i=t.savingToFilesStrategy,o=t.splitFileTime,r=t.streamReady,l=t.motioning,s=!e.streamReady&&r,c=!e.savingToFiles&&a,m=e.savingToFiles&&!a,u=!e.motioning&&l,d=e.motioning&&!l,g=!e.savingToFilesOnlyMotionDetected&&n,p=e.savingToFilesOnlyMotionDetected&&!n;s&&this.kickOffSavingToFile(),c&&this.kickOffSavingToFile(),m&&this.closeCurrentFile(!1),n&&d&&("motion-detected"===i?this.closeCurrentFile(!1):this.pauseSavingToFile()),u&&this.resumeOrKickoffSavingToFile(),p&&this.resumeOrKickoffSavingToFile(),"motion-detected"!==i&&!l&&g&&this.pauseSavingToFile(),e.savingToFilesStrategy===i&&e.splitFileTime===o||this.rescheduleSplitFileBasedOnTime(),e.savingToFilesStrategy!==i&&"time"!==i&&this.cancelSplitFileBasedOnTimeSchedule()}},{key:"componentWillUnmount",value:function(){this.cancelSplitFileBasedOnTimeSchedule()}},{key:"render",value:function(){var e=this.state.putOnUseVlcSnack;return o.a.createElement("div",null,o.a.createElement(Ze,{on:e,off:function(){}}))}}]),t}(i.Component),ot=Object(m.b)(function(e){return Object(n.a)({},e.settings,e.streaming)},function(e){return{savingFiles:function(){e(Ne)},savingComplete:function(){e(je)},newFFmpegWorkStarted:function(t){e(function(e){return{type:"NEW_FFMPEG_WORK",id:e}}(t))},ffmpegWorkFinished:function(t){e(function(e){return{type:"FFMPEG_WORK_FINISHED",id:e}}(t))},ffmpegWorkUpdateProgress:function(t,a){e(function(e,t){return{type:"FFMPEG_WORK_UPDATE_PROGRESS",id:e,percentage:t}}(t,a))}}})(it),rt=function(){function e(t,a,n,i,o){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Object(S.a)(this,e),this.funcOnPreq=t,this.funcOn=a,this.funcOffPreq=n,this.funcOff=i,this.DELAY_IN_MS=o,this.logging=r,this.timeoutHandle=null}return Object(O.a)(e,[{key:"log",value:function(){var e;this.logging&&(e=console).log.apply(e,arguments)}},{key:"on",value:function(){this.funcOnPreq()&&(this.log("executing on"),this.funcOn()),null!=this.timeoutHandle&&(this.log("cancel scheduled off"),clearTimeout(this.timeoutHandle),this.timeoutHandle=null)}},{key:"off",value:function(){var e=this;this.funcOffPreq()&&null==this.timeoutHandle&&(this.log("scheduling a delayed off"),this.timeoutHandle=setTimeout(function(){e.log("executing previously scheduled off"),e.timeoutHandle=null,e.funcOffPreq()&&(e.log("executing off"),e.funcOff())},this.DELAY_IN_MS))}},{key:"handle",get:function(){return this.timeoutHandle}}]),e}(),lt=a(50),st=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).intervalHandle=null,a.state={timeInText:lt().format("YYYY-MM-DD HH:mm:ss")},a}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalHandle=setInterval(function(){e.setState({timeInText:lt().format("YYYY-MM-DD HH:mm:ss")})},1e3)}},{key:"componentWillUnmount",value:function(){null!=this.intervalHandle&&(clearInterval(this.intervalHandle),this.intervalHandle=null)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.style,n=this.state.timeInText;return o.a.createElement("span",{style:a,className:t.text},n)}}]),t}(i.Component),ct=Object(F.withStyles)(function(e){return{text:{position:"fixed",color:"#FFFFFF",fontFamily:'"Courier New", Courier, monospace'}}})(st),mt=a(50),ut=function(){return ze()&&0===window.orientation},dt=function(e){function t(e){var a;Object(S.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).videoRef=o.a.createRef(),a.canvasRef=o.a.createRef(),a.splitFileBasedOnTimeScheduleJob=null;return a.delayedMotionOff=new rt(function(){return!a.props.motioning},function(){return a.props.motionDetected()},function(){return a.props.motioning},function(){return a.props.motionGone()},4e3),a.motionDetectCount=0,a.frame=null,a.fgmask=null,a.fgbg=null,a.slowLoadingSnackTimeoutHandle=null,a.state={putOnNeedCameraSnack:!1,putOnSlowLoadingSnack:!1,putOnCircularProgress:!0,abort:!1},a}return Object(T.a)(t,e),Object(O.a)(t,[{key:"initiateCamera",value:function(){var e=this;this.slowLoadingSnackTimeoutHandle=setTimeout(function(){e.setState({putOnSlowLoadingSnack:!0})},4e3),navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then(function(t){e.videoRef.current.srcObject=t;var a=t.getVideoTracks()[0].getSettings(),n=a.frameRate,i=a.height,o=a.width;if(i=i||480,o=o||640,ze()){var r=[o,i].sort(function(e,t){return ut()?e-t:t-e}),l=Object(Re.a)(r,2);o=l[0],i=l[1]}var s=o/i;e.props.applyVideoParamsAsSettings({frameRate:n,frameRatio:s,height:i,width:o}),e.cancelScheduledSlowLoadingSnack(),e.delayOpenCVProcessing(),e.props.streamReady()}).catch(function(t){e.cancelScheduledSlowLoadingSnack(),e.setState({putOnNeedCameraSnack:!0}),console.error(t)})}},{key:"motionDetecting",value:function(){var e=window.cv;this.motionDetectCount=this.motionDetectCount>=100?0:this.motionDetectCount+1,this.motionDetectCount%3===0&&(this.fgbg.apply(this.frame,this.fgmask),e.countNonZero(this.fgmask)>5e3?this.delayedMotionOff.on():this.delayedMotionOff.off())}},{key:"delayOpenCVProcessing",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;if(t+=1e3,"undefined"!==typeof window.cv)return this.setState({putOnSlowLoadingSnack:!1,putOnCircularProgress:!1}),this.openCVProcessing();4e3===t&&this.setState({putOnSlowLoadingSnack:!0}),setTimeout(function(){e.delayOpenCVProcessing(t/2)},t)}},{key:"cancelScheduledSlowLoadingSnack",value:function(){null!=this.slowLoadingSnackTimeoutHandle&&(clearTimeout(this.slowLoadingSnackTimeoutHandle),this.slowLoadingSnackTimeoutHandle=null)}},{key:"openCVProcessing",value:function(){var e=this,t=this.props,a=t.width,n=t.height,i=t.frameRate,o=window.cv,r=new o.VideoCapture(this.videoRef.current);this.frame=new o.Mat(n,a,o.CV_8UC4),this.fgmask=new o.Mat(n,a,o.CV_8UC1),this.fgbg=new o.BackgroundSubtractorMOG2(500,16,!1);var l=i;setTimeout(function t(){try{var a=Date.now();r.read(e.frame),e.motionDetecting(),o.putText(e.frame,mt().format("YYYY-MM-DD HH:mm:ss"),{x:10,y:20},o.FONT_HERSHEY_PLAIN,1.3,[255,255,255,255]),o.imshow("canvasOutput",e.frame);var n=1e3/l-(Date.now()-a);setTimeout(t,n)}catch(i){console.error(i)}},0)}},{key:"componentDidMount",value:function(){var e=this;this.initiateCamera(),window.onresize=function(){return e.forceUpdate()},window.onorientationchange=function(){var t=e.props,a=[t.width,t.height].sort(function(e,t){return ut()?e-t:t-e}),n=Object(Re.a)(a,2),i=n[0],o=n[1];e.props.applyVideoParamsAsSettings({height:o,width:i}),"undefined"!==typeof window.cv&&(e.frame=new window.cv.Mat(o,i,window.cv.CV_8UC4),e.fgmask=new window.cv.Mat(o,i,window.cv.CV_8UC1)),e.forceUpdate()}}},{key:"componentWillUnmount",value:function(){null!=this.frame&&(this.frame.delete(),this.frame=null),null!=this.fgmask&&(this.fgmask.delete(),this.fgmask=null),null!=this.fgbg&&(this.fgbg.delete(),this.fgbg=null)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.playbackDisplayMode,i=t.frameRatio,r=t.width,l=t.height,s=this.state,c=s.putOnNeedCameraSnack,m=s.putOnSlowLoadingSnack,u=s.putOnCircularProgress,d=a.bgVideoFullScreen,g=a.bgCanvasFullScreen,p=0,f=0;if("original"===n)d=a.bgOriginal,g=a.bgOriginal,null!=this.videoRef.current&&(f=this.videoRef.current.getBoundingClientRect().left,p=this.videoRef.current.getBoundingClientRect().top);else if("extend"===n){window.innerWidth/window.innerHeight>i?(g=a.bgCanvasExtendVertical,f=(window.innerWidth-Math.max(i,r/window.innerHeight)*window.innerHeight)/2):(g=a.bgCanvasExtendHorizontal,p=(window.innerHeight-window.innerWidth/Math.min(i,window.innerWidth/l))/2),d=a.bgVideoExtend}return o.a.createElement("div",{className:a.root},o.a.createElement("video",{width:r,height:l,className:d,ref:this.videoRef,loop:!0,autoPlay:!0,playsInline:!0}),o.a.createElement(ct,{style:{left:f+8,top:p+8}}),o.a.createElement("canvas",{style:{display:"none"},id:"canvasOutput",ref:this.canvasRef,className:g,width:r,height:l}),o.a.createElement(ot,{canvasRef:this.canvasRef}),o.a.createElement("div",{className:a.circularProgress,style:{display:u?null:"none"}},o.a.createElement(Le.a,null)),o.a.createElement(Ye,{on:c,off:function(){e.setState({putOnNeedCameraSnack:!1})}}),o.a.createElement(qe,{on:m,off:function(){e.setState({putOnSlowLoadingSnack:!1}),e.slowLoadingSnackTimeoutHandle=null}}))}}]),t}(i.Component),gt=Object(F.withStyles)(function(e){var t={position:"fixed",top:"50%",left:"50%",zIndex:"-100",transform:"translateX(-50%) translateY(-50%)"},a=t;return{root:{userSelect:"none"},bgVideoFullScreen:Object(n.a)({},a,{minWidth:"100%",minHeight:"100%",width:"auto",height:"auto"}),bgVideoExtend:Object(n.a)({},a,{minWidth:"100%",minHeight:"100%"}),bgCanvasFullScreen:Object(n.a)({},a,{minWidth:"100%",minHeight:"100%"}),bgCanvasExtendHorizontal:Object(n.a)({},a,{width:"100%"}),bgCanvasExtendVertical:Object(n.a)({},a,{height:"100%"}),bgOriginal:Object(n.a)({},a),circularProgress:Object(n.a)({},t,{zIndex:1})}})(Object(m.b)(function(e){return Object(n.a)({},e.settings,e.streaming)},function(e){return{applyVideoParamsAsSettings:function(t){e(function(e){return{type:"APPLY_VIDEO_PARAMS_AS_SETTINGS",obj:e}}(t))},streamReady:function(){e(we)},motionDetected:function(){e(Te)},motionGone:function(){e(Fe)}}})(dt)),pt=a(101),ft=a.n(pt),ht=a(99),vt=a.n(ht),bt=a(54),yt=a.n(bt),Et=a(43),St=a.n(Et),Ot=a(100),kt=a.n(Ot),wt=a(102),Tt=a.n(wt),Ft=a(38),Nt=a.n(Ft),jt=a(78),Ct=a.n(jt),Mt=a(83),xt=a.n(Mt),_t=a(159),Dt=a.n(_t),Rt=function(e){return o.a.createElement(Ue,Object.assign({duration:1e4,message:o.a.createElement("span",{id:"message-id"},"This browser doesn't support this, please check ",o.a.createElement("a",{href:"/browser-matrix",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"}},"Browser Matrix")," for details.")},e))},It=function(e){return o.a.createElement(Ue,Object.assign({duration:3e3,message:o.a.createElement("span",{id:"message-id"},"Preparing a video file this long could take a very long time, see ",o.a.createElement("a",{href:"/faq",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"}},"here")," for details.")},e))},Lt=function(e){return o.a.createElement(Qe,Object.assign({flagName:"savingExplain",duration:1e4,message:o.a.createElement("span",{id:"message-id"},"Video clips will be downloaded periodically on finishing preparing.")},e))},Pt=a(82),At=function(e){function t(){var e,a;Object(S.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(k.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(i)))).state={checked:!1,putOnBrowserCannotSavingFilesSnack:!1,putOnSavingExplainSnack:!1,putOnEncodingCouldTakeLongTimeSnack:!1},a.handleSettingButtonClick=function(){a.state.checked?a.props.settingsSliderOff():a.props.settingsSliderOn(),a.setState(function(e){return{checked:!a.state.checked}})},a.handleToggle=function(e){return function(t){a.props.alterSettings(e,t.target.checked)}},a.handleToggleSavingToFiles=function(e){if("chrome"===Object(Pt.a)().name||"firefox"===Object(Pt.a)().name||"opera"===Object(Pt.a)().name)return a.setState({putOnSavingExplainSnack:!0}),a.handleToggle("savingToFiles")(e);a.setState({putOnBrowserCannotSavingFilesSnack:!0})},a.handleChange=function(e){return function(t){a.props.alterSettings(e,t.target.value)}},a.handleSplitFileTimeChange=function(e){var t=e.target.value;"on-the-30-min"!==t&&"on-the-hour"!==t||a.props.savingRawVideoFiles||a.setState({putOnEncodingCouldTakeLongTimeSnack:!0}),a.handleChange("splitFileTime")(e)},a}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.recoverSettingsFromWebStorage(JSON.parse(localStorage.getItem("settings")))}},{key:"componentDidUpdate",value:function(e){this.props.consent&&JSON.stringify(e.settings)!==JSON.stringify(this.props.settings)&&localStorage.setItem("settings",JSON.stringify(this.props.settings))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.playbackDisplayMode,i=t.alertingOnMotion,r=t.alertingOnMotionStrategy,l=t.savingToFiles,s=t.savingRawVideoFiles,c=t.savingToFilesOnlyMotionDetected,m=t.savingToFilesStrategy,u=t.savingToFilesPrefix,d=t.splitFileSize,g=t.splitFileTime,p=this.state,f=p.checked,h=p.putOnBrowserCannotSavingFilesSnack,v=p.putOnSavingExplainSnack,b=p.putOnEncodingCouldTakeLongTimeSnack;return o.a.createElement("div",{className:a.root},o.a.createElement(Be.a,{key:"settings","aria-label":"ShowSettings",className:a.settingsIconButton,onClick:this.handleSettingButtonClick},o.a.createElement(Dt.a,{color:"action",fontSize:"large",className:a.settingsIcon})),o.a.createElement(vt.a,{direction:"up",in:f,mountOnEnter:!0,unmountOnExit:!0},o.a.createElement(j.a,{elevation:0,className:a.bigPaper},o.a.createElement(j.a,{elevation:1,className:a.paperSettingColumn},o.a.createElement(U.a,{variant:"h5",gutterBottom:!0}," Playback "),o.a.createElement(Oe.a,{className:a.dividerBelowTitle}),o.a.createElement(yt.a,{component:"fieldset",className:a.formControl},o.a.createElement(Ct.a,{component:"legend",className:a.createANewFileLabel},"Display mode"),o.a.createElement(xt.a,{"aria-label":"DisplayMode",name:"playback-display-mode",className:a.radioGroup,value:n,onChange:this.handleChange("playbackDisplayMode")},o.a.createElement(se.a,{value:"original",className:a.radioLabel,control:o.a.createElement(Nt.a,{color:"primary"}),label:"Original"}),o.a.createElement(se.a,{value:"extend",className:a.radioLabel,control:o.a.createElement(Nt.a,{color:"primary"}),label:"Extend"}),o.a.createElement(se.a,{value:"fullscreen",className:a.radioLabel,control:o.a.createElement(Nt.a,{color:"primary"}),label:"Fullscreen"}))),o.a.createElement(se.a,{control:o.a.createElement(ft.a,{checked:i,onChange:this.handleToggle("alertingOnMotion"),color:"primary"}),label:"Alert when motion detected"}),o.a.createElement(yt.a,{component:"fieldset",className:a.formControl},o.a.createElement(xt.a,{"aria-label":"Alerting",name:"alert-strategy",className:a.radioGroup,value:r,onChange:this.handleChange("alertingOnMotionStrategy")},o.a.createElement(se.a,{value:"alert-once",className:a.radioLabel,control:o.a.createElement(Nt.a,{color:i?"primary":"default"}),label:"Alert once"}),o.a.createElement(se.a,{value:"keep-alerting",className:a.radioLabel,control:o.a.createElement(Nt.a,{color:i?"primary":"default"}),label:"Keep alerting"})))),o.a.createElement(j.a,{elevation:1,className:a.paperSettingColumn},o.a.createElement(U.a,{variant:"h5",gutterBottom:!0},"Saving"),o.a.createElement(Oe.a,{className:a.dividerBelowTitle}),o.a.createElement(se.a,{control:o.a.createElement(ft.a,{checked:l,onChange:this.handleToggleSavingToFiles,color:"primary"}),label:"Save video clips"}),o.a.createElement(se.a,{control:o.a.createElement(re.a,{checked:c,onChange:this.handleToggle("savingToFilesOnlyMotionDetected"),color:l?"primary":"default"}),label:"Pause saving when no motion detected"}),o.a.createElement(Tt.a,{id:"file-prefix",label:"File prefix",className:a.filePrefixTextField,value:u,fullWidth:!0,onChange:this.handleChange("savingToFilesPrefix"),margin:"normal",color:l?"primary":"default"}),o.a.createElement(se.a,{className:a.savingRawVideoFilesCheckbox,control:o.a.createElement(re.a,{checked:s,onChange:this.handleToggle("savingRawVideoFiles"),color:l?"primary":"default"}),label:o.a.createElement("span",null,"Saving ",o.a.createElement("a",{href:"/faq",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"}},"raw video files"))}),o.a.createElement(yt.a,{component:"fieldset",className:a.formControl,color:l?"primary":"default"},o.a.createElement(Ct.a,{component:"legend",className:a.createANewFileLabel},"Save to a new file"),o.a.createElement(xt.a,{"aria-label":"Alerting",name:"alert-strategy",className:a.radioGroup,value:m,onChange:this.handleChange("savingToFilesStrategy")},o.a.createElement(se.a,{value:"motion-detected",className:a.radioLabel,control:o.a.createElement(Nt.a,{color:l?"primary":"default"}),label:"when motion detected"}),o.a.createElement(se.a,{value:"time",className:a.radioLabel,control:o.a.createElement(Nt.a,{color:l?"primary":"default"}),label:"on specific time"}))),o.a.createElement(Tt.a,{id:"file-split-size",label:"Size in MB",className:a.fileSplitSizeTextField,style:{display:"file-size"===m?null:"none"},value:d,onChange:this.handleChange("splitFileSize"),margin:"none",color:l?"primary":"default"}),o.a.createElement(yt.a,{className:a.splitFileTimeSelect,style:{display:"time"===m?null:"none"}},o.a.createElement(kt.a,{value:g,onChange:this.handleSplitFileTimeChange,inputProps:{name:"split-file-name",id:"split-file-name"}},o.a.createElement(St.a,{value:"on-the-1-min"},"on the minute"),o.a.createElement(St.a,{value:"on-the-2-min"},"on the 2 min"),o.a.createElement(St.a,{value:"on-the-5-min"},"on the 5 min"),o.a.createElement(St.a,{value:"on-the-10-min"},"on the 10 min"),o.a.createElement(St.a,{value:"on-the-30-min"},"on the 30 min"),o.a.createElement(St.a,{value:"on-the-hour"},"on the hour")))),o.a.createElement(j.a,{elevation:1,className:a.paperSettingColumn,style:{display:"flex",flexDirection:"column"}},o.a.createElement(U.a,{variant:"h5",gutterBottom:!0},"About"),o.a.createElement(Oe.a,{className:a.dividerBelowTitle}),o.a.createElement(U.a,{variant:"body1"},"This Web application is made possible with many awesome projects: ",o.a.createElement("a",{href:"https://wordpress.com/",target:"_blank",rel:"noopener noreferrer",className:a.a},"Wordpress"),", ",o.a.createElement("a",{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer",className:a.a},"Node"),", ",o.a.createElement("a",{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer",className:a.a},"React"),", ",o.a.createElement("a",{href:"https://redux.js.org/",target:"_blank",rel:"noopener noreferrer",className:a.a},"Redux"),", ",o.a.createElement("a",{href:"https://material-ui.com",target:"_blank",rel:"noopener noreferrer",className:a.a},"Material UI"),", ",o.a.createElement("a",{href:"https://docs.opencv.org/3.4/index.html",target:"_blank",rel:"noopener noreferrer",className:a.a},"OpenCV.js"),", ",o.a.createElement("a",{href:"https://github.com/Kagami/ffmpeg.js",target:"_blank",rel:"noopener noreferrer",className:a.a},"FFmpeg.js"),", ",o.a.createElement("a",{href:"https://github.com/jimmywarting/StreamSaver.js",target:"_blank",rel:"noopener noreferrer",className:a.a},"StreamSaver.js"),", ",o.a.createElement("a",{href:"https://github.com/eligrey/FileSaver.js/",target:"_blank",rel:"noopener noreferrer",className:a.a},"FileSaver.js")," and so on."),o.a.createElement(U.a,{variant:"body1",gutterBottom:!0,style:{flexGrow:1},className:a.aboutParagraph2},"You can contact us for bugs, feedback, feature requests or something else through ",o.a.createElement("a",{href:"mailto:contact@videosurveillance.webcam",className:a.a},"Email")," ."),o.a.createElement(U.a,{variant:"caption",gutterBottom:!0},o.a.createElement("a",{href:"/terms-of-service",target:"_blank",rel:"noopener noreferrer",className:a.a},"Terms of Service"),", ",o.a.createElement("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:a.a},"Privacy Policy"),", and ",o.a.createElement("a",{href:"/cookie-policy",target:"_blank",rel:"noopener noreferrer",className:a.a},"Cookie Policy"))))),o.a.createElement(Rt,{on:h,off:function(){e.setState({putOnBrowserCannotSavingFilesSnack:!1})}}),o.a.createElement(Lt,{on:v,off:function(){e.setState({putOnSavingExplainSnack:!1})}}),o.a.createElement(It,{on:b,off:function(){e.setState({putOnEncodingCouldTakeLongTimeSnack:!1})}}))}}]),t}(i.Component),Wt=Object(F.withStyles)(function(e){return{root:{width:"100vw",height:"100vh",overflowY:"hidden",display:"flex",justifyContent:"center",alignItems:"center"},settingsIconButton:{background:"rgba(255,255,255,0.2)",position:"fixed",bottom:0,marginLeft:"auto",marginRight:"auto",zIndex:2},settingsIcon:{},bigPaper:{background:"rgba(255,255,255,0.5)",zIndex:1,width:"90%",maxWidth:40*e.spacing.unit*3*1.2,maxHeight:"90%",overflow:"auto",padding:2*e.spacing.unit,display:"flex",flexWrap:"wrap",justifyContent:"space-around"},paperSettingColumn:{background:"rgba(255,255,255,0.6)",margin:e.spacing.unit,padding:2*e.spacing.unit,maxWidth:40*e.spacing.unit,minWidth:40*e.spacing.unit},dividerBelowTitle:{marginBottom:e.spacing.unit},radioGroup:{flexDirection:"row"},radioLabel:{height:5*e.spacing.unit},filePrefixTextField:{},savingRawVideoFilesCheckbox:{marginTop:1*e.spacing.unit,marginBottom:2*e.spacing.unit},fileSplitSizeTextField:{width:10*e.spacing.unit},splitFileTimeSelect:{marginBottom:1*e.spacing.unit},createANewFileLabel:{marginBottom:1*e.spacing.unit},aboutParagraph2:{marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit},a:{color:"inherit"}}})(Object(m.b)(function(e){return Object(n.a)({consent:e.misc.consent},e.settings,{settings:e.settings})},function(e){return{alterSettings:function(t,a){e(function(e,t){return{type:"ALTER_SETTING",name:e,value:t}}(t,a))},recoverSettingsFromWebStorage:function(t){e(function(e){return{type:"RECOVER_SETTINGS_FROM_WEB_STORAGE",value:e}}(t))},settingsSliderOn:function(){e(Ce)},settingsSliderOff:function(){e(Me)}}})(At)),Bt=a(84),Vt=a.n(Bt),Ht=a(160),Gt=a.n(Ht),Ut=a(161),zt=a.n(Ut),Yt=function(e){function t(){return Object(S.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.motioning,n=e.saving,i=e.progressList;return o.a.createElement("div",{className:t.root},o.a.createElement("div",{className:t.indicator},o.a.createElement(Vt.a,{title:"Motion detected"},o.a.createElement(Gt.a,{className:t.motionIcon,style:{visibility:a?"visible":"hidden"},color:"action",fontSize:"large"})),o.a.createElement(Vt.a,{title:"Saving captured video"},o.a.createElement(zt.a,{className:t.savingIcon,style:{visibility:n?"visible":"hidden"},color:"action",fontSize:"large"}))),o.a.createElement("div",{className:t.progressList},i.map(function(e){var a=e.id,n=e.percentage;return o.a.createElement(Vt.a,{title:"Preparing video file ".concat(Math.round(100*n),"%"),key:a},o.a.createElement(Le.a,{className:t.progress,variant:"static",size:30,thickness:5,value:100*n,color:"inherit"}))})))}}]),t}(i.Component),qt=Object(F.withStyles)(function(e){return{root:{position:"fixed",right:1*e.spacing.unit,bottom:10*e.spacing.unit,zIndex:2,display:"flex",flexDirection:"column"},indicator:{animation:"flash linear 2s infinite",display:"flex",flexDirection:"column"},progressList:{display:"flex",marginTop:1*e.spacing.unit,flexDirection:"column",alignItems:"center",color:"rgba(0, 0, 0, 0.6)"},progress:{marginTop:1*e.spacing.unit,marginBottom:1*e.spacing.unit,backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:10*e.spacing.unit},motionIcon:{marginTop:1*e.spacing.unit},savingIcon:{marginTop:1*e.spacing.unit},encodingIcon:{marginTop:1*e.spacing.unit},"@keyframes flash":{"0%":{opacity:1},"50%":{opacity:.1},"100%":{opacity:1}}}})(Object(m.b)(function(e){return Object(n.a)({},e.streaming,e.ffmpeg)},function(e){return{}})(Yt)),Jt=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},Kt=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(k.a)(this,Object(w.a)(t).call(this,e))).state={animationOn:!0},a.url="/notification-light.mp3",a.audio=new Audio(a.url),a}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.motioning,n=t.alertingOnMotion,i=t.alertingOnMotionStrategy;n&&!e.motioning&&a&&"alert-once"===i&&(this.setState({animationOn:!1}),this.setState({animationOn:!0}),this.audio.loop=!1,Jt()||this.audio.play()),n&&a&&"keep-alerting"===i&&(this.audio.loop=!0,Jt()||this.audio.play()),e.motioning&&!a&&(this.audio.loop=!1),e.alertingOnMotion&&!n&&(this.audio.loop=!1),"keep-alerting"===e.alertingOnMotionStrategy&&"alert-once"===i&&(this.audio.loop=!1)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.motioning,n=e.alertingOnMotion,i=e.alertingOnMotionStrategy,r=this.state.animationOn;return o.a.createElement("div",{style:{display:a&&n?null:"none",animationName:r?"flash":null,animationIterationCount:"alert-once"===i?1:"infinite"},className:t.root})}}]),t}(i.Component),Xt=Object(F.withStyles)(function(e){return{root:{zIndex:4,position:"fixed",left:0,top:0,width:"100vw",height:"100vh",boxSizing:"border-box",borderStyle:"solid",borderWidth:e.spacing.unit,borderColor:"red",pointerEvents:"none",animationName:"flash",animationTimefunction:"linear",animationIterationCount:"infinite",animationDuration:"2s",opacity:0},motionIcon:{position:"fixed",bottom:10*e.spacing.unit,right:3*e.spacing.unit,zIndex:2},"@keyframes flash":{"0%":{opacity:0},"50%":{opacity:1},"100%":{opacity:0}}}})(Object(m.b)(function(e){return{motioning:e.streaming.motioning,alertingOnMotion:e.settings.alertingOnMotion,alertingOnMotionStrategy:e.settings.alertingOnMotionStrategy}},function(e){return{}})(Kt)),Qt=function(e){function t(){return Object(S.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){console.log("version number: ",Number(localStorage.getItem("v"))),this.props.consent&&localStorage.setItem("v",15)}},{key:"componentDidUpdate",value:function(e){!e.consent&&this.props.consent&&(localStorage.setItem("v",15),localStorage.setItem("init-v",15),localStorage.setItem("init-ts",Date.now()))}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),t}(i.Component),Zt=Object(m.b)(function(e){return{consent:e.misc.consent}},function(e){return{}})(Qt),$t=a(55),ea=function(e){function t(){return Object(S.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.consent&&($t.a.initialize("UA-130187164-1"),$t.a.pageview(window.location.pathname+window.location.search))}},{key:"componentDidUpdate",value:function(e){!e.consent&&this.props.consent&&($t.a.initialize("UA-130187164-1"),$t.a.pageview(window.location.pathname+window.location.search)),!e.settingsSliderIsOn&&this.props.settingsSliderIsOn&&$t.a.event({category:"User",action:"settings-slider-on"})}},{key:"render",value:function(){return o.a.createElement("div",null)}}]),t}(i.Component),ta=Object(m.b)(function(e){return{consent:e.misc.consent,settingsSliderIsOn:e.misc.settingsSliderIsOn}},function(e){return{}})(ea),aa=function(e){function t(){return Object(S.a)(this,t),Object(k.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.loadWebStorageValue()}},{key:"loadWebStorageValue",value:function(){var e=this.props.applyWebStorageValue;e("consent","true"===localStorage.getItem("consent")),e("v",Number(localStorage.getItem("v")))}},{key:"render",value:function(){var e=this.props.consent;return o.a.createElement("div",null,o.a.createElement(De,null),e?o.a.createElement(gt,null):null,o.a.createElement(qt,null),o.a.createElement(Wt,null),o.a.createElement(Xt,null),o.a.createElement(Zt,null),o.a.createElement(ta,null))}}]),t}(i.Component),na=Object(m.b)(function(e){return{consent:e.misc.consent}},function(e){return{applyWebStorageValue:function(t,a){e(function(e,t){return{type:"APPLY_WEB_STORAGE_VALUE",name:e,value:t}}(t,a))}}})(aa),ia=function(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&navigator.userAgent.match("CriOS")};window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__=!0;var oa=Object(u.c)(Object(u.b)(Object(n.a)({},b)));oa.subscribe(function(){console.log("-- store.getState() --"),console.log(oa.getState())}),l.a.render(o.a.createElement(m.a,{store:oa},o.a.createElement(y.a,null,o.a.createElement("div",null,o.a.createElement(E.a,{exact:!0,path:"/",render:function(){return function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var a=e.indexOf("rv:");return parseInt(e.substring(a+3,e.indexOf(".",a)),10)}e.indexOf("Edge/");return!1}()||ia()?o.a.createElement(ae,{sorry:!0}):o.a.createElement(na,null)}}),o.a.createElement(E.a,{path:"/terms-of-service",component:_}),o.a.createElement(E.a,{path:"/privacy-policy",component:_}),o.a.createElement(E.a,{path:"/cookie-policy",component:_}),o.a.createElement(E.a,{path:"/browser-matrix",component:ae}),o.a.createElement(E.a,{path:"/faq",component:_})))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");s?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):c(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):c(t,e)})}}()}},[[165,2,1]]]);
//# sourceMappingURL=main.3c76c8cb.chunk.js.map